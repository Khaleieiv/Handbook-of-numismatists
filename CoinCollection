    public class CoinList : List<Coin>
    {
        TxtReader txt;

        public CoinList()
        {
            txt = new TxtReader(Environment.CurrentDirectory + @"\Data\AllCoin.txt");
            CreateCollFromFile();
        }

        public CoinList(string g)
        {
            txt = new TxtReader(g);
            CreateCollFromFile();
        }

        public void CreateNewElem(string n, string y, string c, string d)//создает новый элемент
        {
            n = n.Replace(System.Environment.NewLine, "");
            y = y.Replace(System.Environment.NewLine, "");
            c = c.Replace(System.Environment.NewLine, "");
            d = d.Replace(System.Environment.NewLine, "");

            AddInColl(n, y, c, d);
            string[] str = { n, y, c, d };
            txt.AddToFile(str);
        }

        public void CreateCollFromFile()//создает колелекцию из файла
        {
            Clear();

            string[] str = txt.CreateArr();
            if (str.Length % 4 != 0) { return; }
            for (int i = 0; i < str.Length; i += 4)
            {
                AddInColl(str[i], str[i + 1], str[i + 2], str[i + 3]);
            }
        }

        public void ChangeElem(int coinindex, string n, string y, string c, string d)//меняет элемент коллекции
        {
            n = n.Replace(System.Environment.NewLine, "");
            y = y.Replace(System.Environment.NewLine, "");
            c = c.Replace(System.Environment.NewLine, "");
            d = d.Replace(System.Environment.NewLine, "");

            if (Count <= coinindex) { return; }
            Coin current = this[coinindex];
            //if ((n != "" && n != null && y != "" && y != null && c != "" && c != null && d != "" && d != null))
            //{
            //if (n != "" && n != null)
            current.Name = n;
            //if (y != "" && y != null)
            current.Year = y;
            //if (c != "" && c != null)
            current.Country = c;
            //if (d != "" && d != null)
            current.Describe = d;

            txt.ChengeFile(CreateFileFromColl());
            //}

        }

        public void DeleteItem(int coinindex)// удаляет элемент из коллекции
        {
            RemoveAt(coinindex);
            txt.ChengeFile(CreateFileFromColl());
        }

        public void Print()
        {
            int n = 0;
            foreach (Coin x in this)
            {
                Console.WriteLine(n + ":\t " + x.Name + ", " + x.Year + ", " + x.Country + ", " + x.Describe);
                n++;
            }
        }

        private string[] CreateFileFromColl()//создает массив из коллекции
        {
            string[] str = new string[Count * 4];
            int n = 0;
            foreach (Coin x in this)
            {
                str[n] = x.Name;
                str[n + 1] = x.Year;
                str[n + 2] = x.Country;
                str[n + 3] = x.Describe;
                n += 4;
            }
            return str;
        }

        private void AddInColl(string n, string y, string c, string d)//заносить элемент в коллекцию
        {
            Add(new Coin(n, y, c, d));
        }
    }

        public class TxtReader
        {
            private string path;
            public string Path
            {
                get { return path; }
                set { path = value; }
            }



            public TxtReader(string p)
            {
                this.path = p;
                CheckFile();
            }

            //Methods

            public void CheckFile()
            {
                if (!File.Exists(Path))
                {
                    Directory.CreateDirectory(Path.Remove(Path.LastIndexOf("\\")));
                    File.Create(Path).Close();
                }
            }

            protected string[] CreateArr()//читает файл
            {
                CheckFile();
                return File.ReadAllLines(Path);
            }

            protected void ChengeFile(string[] str)// меняет текст файла
            {
                if (File.Exists(Path))
                {
                    File.Delete(Path);
                    File.Create(Path).Close();
                }
                using (StreamWriter file = new StreamWriter(Path))
                {
                    foreach (string x in str)
                    {
                        file.WriteLine(x);
                    }
                }
            }

            protected void AddToFile(string[] str)// добавляет в коней файла
            {
                CheckFile();
                using (StreamWriter file = new StreamWriter(Path, true))
                {
                    foreach (string x in str)
                    {
                        file.WriteLine(x);
                    }
                }
            }

            public virtual void Print()
            {
                string[] str = CreateArr();
                foreach (string x in str)
                    Console.WriteLine(x);
            }
        }


        public class Coin
        {
            private string name;
            private string year;
            private string country;
            private string describe;

            public string Name
            {
                get { return name; }
                set { name = value; }
            }
            public string Year
            {
                get { return year; }
                set { year = value; }
            }
            public string Country
            {
                get { return country; }
                set { country = value; }
            }
            public string Describe
            {
                get { return describe; }
                set { describe = value; }
            }

            public Coin(string n, string y, string c, string d)
            {
                name = n;
                year = y;
                country = c;
                describe = d;
            }
        }

        public class Сollector
        {
            private string name;
            private string country;
            private string details;
            private string rarecoin;

            public string Name
            {
                get { return name; }
                set { name = value; }
            }
            public string Country
            {
                get { return country; }
                set { country = value; }
            }
            public string Details
            {
                get { return details; }
                set { details = value; }
            }
            public string Rarecoin
            {
                get { return rarecoin; }
                set { rarecoin = value; }
            }

            public Сollector(string n, string c, string d, string r)
            {
                name = n;
                country = c;
                details = d;
                rarecoin = r;
            }
        }

    }
